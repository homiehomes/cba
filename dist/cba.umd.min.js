/*! For license information please see cba.umd.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.cba=t():(e.cba=e.cba||{},e.cba.cba=t())}(self,()=>(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}e.r(t),e.d(t,{cba:()=>u});var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("cba: You must provide a fieldset name.");this.settings=Object.assign({debug:!1,fieldset:t,selectAllValue:"all",associatedLabels:!1},n),this.masterCheckbox=document.querySelector('input[name="'.concat(this.settings.fieldset,'[]"][value="').concat(this.settings.selectAllValue,'"]')),this.allCheckboxes=document.querySelectorAll('input[name="'.concat(this.settings.fieldset,'[]"]:not([value="').concat(this.settings.selectAllValue,'"])'));var o=!0===this.settings.associatedLabels?this.getLabels():void 0;this.masterCheckbox?(this.allCheckedEvent=new CustomEvent("cba:allChecked",{detail:s({fieldset:this.settings.fieldset,checkboxes:this.allCheckboxes,count:this.allCheckboxes.length,values:r(this.allCheckboxes).map(function(e){return e.value})||[]},!0===this.settings.associatedLabels?{labels:o}:{})}),this.init()):this.settings.debug&&console.warn('cba: No "All" checkbox found for fieldset "'.concat(t,'".'))}return t=e,n=[{key:"setOpts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.settings,e)}},{key:"getLabels",value:function(){return Array.from(this.allCheckboxes).map(function(e){var t=e.parentElement;if("label"===t.tagName.toLowerCase())return t.textContent.trim();var n=document.querySelector('label[for="'.concat(e.id,'"]'));return n?n.textContent.trim():""})}},{key:"areAllCheckboxesChecked",value:function(){return r(this.allCheckboxes).every(function(e){return e.checked})}},{key:"toggleAllCheckboxes",value:function(e){this.allCheckboxes.forEach(function(t){return t.checked=e}),this.areAllCheckboxesChecked()?this.masterCheckbox.dispatchEvent(this.allCheckedEvent):this.masterCheckbox.dispatchEvent(new CustomEvent("cba:checkedDetails",{detail:{fieldset:this.settings.fieldset,count:0,values:[],labels:[]}}))}},{key:"updateAllCheckboxes",value:function(){var e,t=Array.from(this.allCheckboxes).filter(function(e){return e.checked}),n=t.length,r=t.map(function(e){return e.value}),o=this.allCheckboxes.length;!0===this.settings.associatedLabels&&(e=t.map(function(e){var t=e.parentElement;if("label"===t.tagName.toLowerCase())return t.textContent.trim();var n=document.querySelector('label[for="'.concat(e.id,'"]'));return n?n.textContent.trim():""})),0===n?(this.masterCheckbox.checked=!1,this.masterCheckbox.indeterminate=!1,this.masterCheckbox.classList.remove("indeterminate"),this.masterCheckbox.dispatchEvent(new CustomEvent("cba:checkedDetails",{detail:s({fieldset:this.settings.fieldset,count:0,values:[]},!0===this.settings.associatedLabels?{labels:[]}:{})}))):n===o?(this.masterCheckbox.checked=!0,this.masterCheckbox.indeterminate=!1,this.masterCheckbox.classList.remove("indeterminate"),this.masterCheckbox.dispatchEvent(this.allCheckedEvent)):(this.masterCheckbox.checked=!1,this.masterCheckbox.indeterminate=!0,this.masterCheckbox.classList.add("indeterminate"),this.masterCheckbox.dispatchEvent(new CustomEvent("cba:checkedDetails",{detail:s({fieldset:this.settings.fieldset,count:n,values:r},!0===this.settings.associatedLabels?{labels:e}:{})})))}},{key:"init",value:function(){var e=this;this.settings.debug&&console.log('cba: Initialized for fieldset "'.concat(this.settings.fieldset,'".')),this.masterCheckbox.addEventListener("change",function(){e.toggleAllCheckboxes(e.masterCheckbox.checked)}),this.allCheckboxes.forEach(function(t){t.addEventListener("change",function(){return e.updateAllCheckboxes()})}),this.updateAllCheckboxes()}}],o=[{key:"initAll",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};document.querySelectorAll('input[value="'.concat(t.select||"All",'"]')).forEach(function(n){new e(n.getAttribute("name").replace("[]",""),t)})}}],n&&c(t.prototype,n),o&&c(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,o}();return"undefined"!=typeof window&&(window.cba=u),t})());