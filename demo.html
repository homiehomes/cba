<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo</title>

    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        form {
            input {
                margin: 10px;
            }
        }

        .note {
            display: block;
            padding: 1rem;
            font-size: 0.9em;
            color: #333;
            font-weight: 600;
            background-color: lightblue;
            font-style: italic;
            margin: 1rem 0;
        }
    </style>
</head>

<body>
    <h1>Checkbox All (CBA) Demo</h1>
    <p>This demo showcases the Checkbox All (CBA) utility for managing checkbox groups. You can use this file as a
        starting point for your own implementations. The basic setup involves including the CBA script and initializing
        it with your checkbox groups.</p>
    <span class="note">Use dev tools "Console" to see the CBA in action.</span>
    <form action="">
        <fieldset id="group1">
            <legend>Group 1 - Explicit Association using for and id attributes<span class="count"></span></legend>
            <p>Select your options:</p>

            <input type="checkbox" id="selectAll" name="group1[]" value="all">
            <label for="selectAll">Select All</label>
            <br>
            <input type="checkbox" id="option1" name="group1[]" value="option1">
            <label for="option1">Option 1</label>
            <br>
            <input type="checkbox" id="option2" name="group1[]" value="option2">
            <label for="option2">Option 2</label>
            <br>
            <input type="checkbox" id="option3" name="group1[]" value="option3">
            <label for="option3">Option 3</label>
            <br>
            <input type="checkbox" id="option4" name="group1[]" value="option4">
            <label for="option4">Option 4</label>
        </fieldset>

        <input type="submit" value="Submit">
    </form>
    <form action="">
        <fieldset id="group2">
            <legend>Group 2 - Implicit Association by Wrapping the Checkbox within the Label<span class="count2"></span></legend>
            <p>Select your options:</p>

            
            <label><input type="checkbox" name="group2[]" value="all"> Select All</label>
            <br>
            <label><input type="checkbox" name="group2[]" value="option1"> Option 1</label>
            <br>
            <label><input type="checkbox" name="group2[]" value="option2"> Option 2</label>
            <br>
            <label><input type="checkbox" name="group2[]" value="option3"> Option 3</label>
            <br>
            <label><input type="checkbox" name="group2[]" value="option4"> Option 4</label>
        </fieldset>

        <input type="submit" value="Submit">
    </form>

    <h2>Initialization Script</h2>

    <code>
        &lt;script type="module"&gt;<br>
        &nbsp;&nbsp;import { cba } from './dist/cba.js';<br><br>

        &nbsp;&nbsp;new cba('group1');<br>
        &lt;/script&gt;
    </code>

    <h2>Checkbox Group</h2>
    <p>The 'group1' refers to the collection of checkboxes within the first fieldset.</p>

    <code>
        &lt;input type="checkbox" name="group1[]" value="all"&gt;Select All&lt;br&gt;
    </code>
    <p><strong>cba</strong> looks for <code>value="all"</code> by default but you may specify your own
        "Select All"
        checkbox by changing the value attribute.</p>

    <pre>
<code>
    &lt;input type="checkbox" name="group1[]" value="select-all"&gt;Option 1&lt;br&gt;
    &lt;input type="checkbox" name="group1[]" value="Option1"&gt;Option 1&lt;br&gt;
    &lt;input type="checkbox" name="group1[]" value="Option2"&gt;Option 2&lt;br&gt;
    &lt;input type="checkbox" name="group1[]" value="Option3"&gt;Option 3&lt;br&gt;
</code>
</pre>

    <code>
    &lt;script type="module"&gt;<br>
    &nbsp;&nbsp;import { cba } from './dist/cba.js';<br><br>

    &nbsp;&nbsp;new cba('group1', { selectAllValue: 'select-all' });<br>
    &lt;/script&gt;
</code>

    <h2>Event Listeners</h2>
    <p>
        <strong>CBA</strong> does not update the DOM with counts or other UI elements, but you can easily
        implement this functionality by listening to the following events:
    </p>
    <ul>
        <li>cba:allChecked</li>
        <li>cba:countChecked</li>
    </ul>
    <p>Return data</p>
    <ul>
        <li><strong>fieldset</strong>: The fieldset element containing the checkbox group.</li>
        <li><strong>count</strong>: The total number of checkboxes that are currently checked.</li>
        <li><strong>values</strong>: An array of values of the checked checkboxes.</li>
        <li><strong>labels</strong>: (if associatedLabels is true) An array of labels corresponding to the checked checkboxes.</li>
    <p><strong>Example of listening for the <code>cba:allChecked</code> event:</strong></p>
    <p>Dispatch event that all checkboxes are checked:</p>
    <pre>
<code>
    document.querySelector('input[name="group1[]"][value="all"]').addEventListener('cba:allChecked', (e) =&gt; {
        console.log('Total checked for:', e.detail.count);
    });
</code>
</pre>
    <p><strong>Example of listening for the <code>cba:countChecked</code> event:</strong></p>
    <p>Dispatch event that count of checked boxes has changed:</p>
    <pre>
<code>
    document.querySelector('input[name="group1[]"]').addEventListener('cba:countChecked', (e) =&gt; {
        console.log('Count:', e.detail.count);
        console.log('Checked values:', e.detail.values);
        console.log('Checked labels:', e.detail.labels);
    });
</code>
</pre>
    <p>These events provide details about the fieldset and the count of checked boxes.</p>
</body>

<script type="module">
    import { cba } from './dist/cba.js';

    new cba('group1', {
        associatedLabels: true
    });
    new cba('group2', {
        associatedLabels: true
    });

    const counter = document.querySelector('.count');
    const counter2 = document.querySelector('.count2');

    // Listen for allChecked event to update the counter
    document
        .querySelector('input[name="group1[]"][value="all"]')
        .addEventListener('cba:allChecked', (e) => {
            console.log('g1 Total checked for:', e.detail.count);
            console.log('g1 Checked values:', e.detail.values);
            counter.textContent = ` (${e.detail.count})`;
        });

    // Listen for countChecked event to update the counter
    document
        .querySelector('input[name="group1[]"]')
        .addEventListener('cba:countChecked', (e) => {
            console.log('g1 Count:', e.detail.count);
            console.log('g1 Checked values:', e.detail.values);
            console.log('g1 Checked labels:', e.detail.labels);
            counter.textContent = ` (${e.detail.count})`;
        });
    // Listen for allChecked event to update the counter
    document
        .querySelector('input[name="group2[]"][value="all"]')
        .addEventListener('cba:allChecked', (e) => {
            console.log('g2 Total:', e.detail.count);
            console.log('g2 Checked values:', e.detail.values);
            counter2.textContent = ` (${e.detail.count})`;
        });

    // Listen for countChecked event to update the counter
    document
        .querySelector('input[name="group2[]"]')
        .addEventListener('cba:countChecked', (e) => {
            console.log('g2 Count:', e.detail.count);
            console.log('g2 Checked values:', e.detail.values);
            console.log('g2 Checked labels:', e.detail.labels);
            counter2.textContent = ` (${e.detail.count})`;
        });
</script>
</body>

</html>